(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{412:(e,a,t)=>{"use strict";t.d(a,{db:()=>d,j:()=>l});var s=t(3915),i=t(6203),n=t(5317);let r=(0,s.Wp)({apiKey:"AIzaSyDD6coY49gQGo7rkhcPQY6nUhftziODTPY",authDomain:"escape-portal-au.firebaseapp.com",projectId:"escape-portal-au",storageBucket:"escape-portal-au.firebasestorage.app",messagingSenderId:"917308365081",appId:"1:917308365081:web:1fb93c63b2b43ad9678d88",measurementId:"G-LQ50CD3219"}),l=(0,i.xI)(r),d=(0,n.aU)(r)},1339:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(5155),i=t(2115),n=t(5317),r=t(412);function l(){let[e,a]=(0,i.useState)([]),[t,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{let e=await (0,n.GG)((0,n.rJ)(r.db,"Organisations")),t={};e.forEach(e=>{t[e.id]=e.data().organisationName||"Unknown Org"});let s=await (0,n.GG)((0,n.Cs)(r.db,"Sessions"));a(await Promise.all(s.docs.map(async e=>{var a;let s=e.data(),i=s.teamId||"",l=null==(a=e.ref.parent.parent)?void 0:a.parent,d=(null==l?void 0:l.id)||"",m=0;if(i){let e=(0,n.P)((0,n.rJ)(r.db,"TeamMembers"),(0,n._M)("teamId","==",i));m=(await (0,n.GG)(e)).size}return{id:e.id,date:s.date,startTime:s.startTime,facilitatorName:s.facilitatorName,teamName:s.teamName||"",teamId:i,roundId:s.roundId||"",orgId:d,organisationName:t[d]||"Unknown Org",memberCount:m}}))),l(!1)})()},[]);let d=new Date,m=new Date(d);m.setDate(d.getDate()-d.getDay());let c=new Date(m);c.setDate(m.getDate()+6);let o=e.filter(e=>{let a=new Date(e.date);return a>=m&&a<=c}).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime()),x=e.filter(e=>new Date(e.date)>c).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime()),h=e.filter(e=>new Date(e.date)<m).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),p=e=>(0,s.jsxs)("li",{className:"border p-3 rounded flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.date})," at ",e.startTime,(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[e.teamName," | Facilitator: ",e.facilitatorName]}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Org: ",e.organisationName," | Members: ",e.memberCount]})]}),(0,s.jsx)("a",{href:"/admin-portal/organisation/".concat(e.orgId),className:"text-blue-600 hover:underline text-sm ml-4",children:"✏️ Edit"})]},e.id);return t?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Sessions"}),(0,s.jsxs)("section",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDDD3 This Week"}),0===o.length?(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"No sessions this week."}):(0,s.jsx)("ul",{className:"space-y-2",children:o.map(p)})]}),(0,s.jsxs)("section",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"⏭ Upcoming"}),0===x.length?(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"No upcoming sessions."}):(0,s.jsx)("ul",{className:"space-y-2",children:x.map(p)})]}),(0,s.jsxs)("section",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCDC Past Sessions"}),0===h.length?(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"No past sessions."}):(0,s.jsx)("ul",{className:"space-y-2",children:h.map(p)})]})]})}},1720:(e,a,t)=>{Promise.resolve().then(t.bind(t,1339))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,118,645,441,684,358],()=>a(1720)),_N_E=e.O()}]);